# Aptechka Bot

Telegram –±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∞–ø—Ç–µ—á–µ–∫ –ø–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π bePaid.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö Clean Architecture:

- **Domain Layer** - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —Å—É—â–Ω–æ—Å—Ç–∏
- **Infrastructure Layer** - —Ä–∞–±–æ—Ç–∞ —Å –ë–î, –≤–Ω–µ—à–Ω–∏–º–∏ API  
- **Presentation Layer** - handlers, keyboards, middlewares

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **aiogram 3.x** - Telegram Bot API
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **SQLAlchemy + Alembic** - ORM –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- **bePaid API** - –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **Docker + Docker Compose** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **GitHub Actions** - CI/CD
- **Nginx** - reverse proxy
- **systemd** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd aptechka.info

# 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make install

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ë–î
make dev

# 5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
make migrate-up

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
make run
```

### –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ deploy/README.md
./deploy/deploy.sh prod
```

## üìã –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
make install          # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make dev              # –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
make lint             # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make test             # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make migrate-up       # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
make migrate-down     # –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π
make build-dev        # –°–±–æ—Ä–∫–∞ dev –æ–±—Ä–∞–∑–∞
make build-prod       # –°–±–æ—Ä–∫–∞ prod –æ–±—Ä–∞–∑–∞
make deploy-dev       # –î–µ–ø–ª–æ–π –Ω–∞ dev
make deploy-prod      # –î–µ–ø–ª–æ–π –Ω–∞ prod
```

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ –∞–ø—Ç–µ—á–µ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å bePaid –¥–ª—è –æ–ø–ª–∞—Ç—ã
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (6 –≤–æ–ø—Ä–æ—Å–æ–≤)
- ‚úÖ FAQ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
- ‚úÖ –î–æ—Å—Ç–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–¥—É–∫—Ç—ã:
- üé• –¢—Ä–∏–ø–≤–∞–π–µ—Ä –∑–∞ 1 BYN
- üé• –¢—Ä–∏–ø–≤–∞–π–µ—Ä –∑–∞ 99 BYN  
- üìñ –ì–∞–π–¥ –∑–∞ 1 BYN
- üì¶ –ê–ø—Ç–µ—á–∫–∏ —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# Telegram Bot
BOT_TOKEN=your_bot_token
WEBHOOK_HOST=https://your-domain.com
WEBHOOK_PORT=8080

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö  
DATABASE_URL=postgresql://user:pass@localhost:5432/aptechka

# bePaid
BEPAID_SHOP_ID=your_shop_id
BEPAID_SECRET_KEY=your_secret_key

# –ê–¥–º–∏–Ω—ã
ADMIN_IDS=123456789,987654321
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏:
```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
sudo journalctl -u aptechka-bot -f

# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose logs -f

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/aptechka_bot_*.log
```

### Health Check:
```bash
curl -f http://localhost:8080/health
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Rate limiting
- ‚úÖ IP whitelist –¥–ª—è webhooks
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π bePaid
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üìà CI/CD

- **develop** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ dev —Å–µ—Ä–≤–µ—Ä
- **main** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ prod —Å–µ—Ä–≤–µ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
- Security scanning
- Blue-green deployment

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É –æ—Ç `develop`
2. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –°–æ–∑–¥–∞–π—Ç–µ Pull Request
4. –ü–æ—Å–ª–µ —Ä–µ–≤—å—é –∏ —Ç–µ—Å—Ç–æ–≤ - merge –≤ `develop`
5. –î–ª—è —Ä–µ–ª–∏–∑–∞ - merge `develop` –≤ `main`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–º. [deploy/README.md](deploy/README.md)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
